@model AdminViewModel
@{
    ViewData["Title"] = "Admin";
}

<div class="card">
    <h4 class="card-header">Worker queue</h4>

    <ul class="list-group list-group-flush">
        <li class="list-group-item"><b>Total message count:</b> @(Model.ApproximateMessageCount + Model.PoisonApproximateMessageCount)</li>
        <li class="list-group-item"><b>Main - approximate message count:</b> @Model.ApproximateMessageCount</li>
        <li class="list-group-item"><b>Main - available messages:</b> @(Model.AvailableMessageCountIsExact ? string.Empty : "≥") @Model.AvailableMessageCountLowerBound</li>
        <li class="list-group-item"><b>Poison - approximate message count:</b> @Model.PoisonApproximateMessageCount</li>
        <li class="list-group-item"><b>Poison - available messages:</b> @(Model.PoisonAvailableMessageCountIsExact ? string.Empty : "≥") @Model.PoisonAvailableMessageCountLowerBound</li>
    </ul>
</div>

@foreach (var catalogScan in Model.CatalogScans)
{
    @await Html.PartialAsync("_CatalogScan", catalogScan)
}

<a name="DownloadsToCsv" class="anchor"></a>
<div class="card mt-3">
    <h4 class="card-header">DownloadsToCsv</h4>

    <ul class="list-group list-group-flush">
        <li class="list-group-item"><b>Is running?</b> @Model.IsDownloadsToCsvRunning</li>
    </ul>

    <div class="card-body">
        <form asp-action="StartDownloadsToCsv" method="post" class="form-inline">
            <button type="submit" class="btn btn-primary mr-1">Start</button>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" id="OwnersToCsv-loop" name="loop" value="true" />
                <label class="form-check-label" for="OwnersToCsv-loop">Loop</label>
            </div>
        </form>
    </div>
</div>

<a name="OwnersToCsv" class="anchor"></a>
<div class="card mt-3">
    <h4 class="card-header">OwnersToCsv</h4>

    <ul class="list-group list-group-flush">
        <li class="list-group-item"><b>Is running?</b> @Model.IsOwnersToCsvRunning</li>
    </ul>

    <div class="card-body">
        <form asp-action="StartOwnersToCsv" method="post" class="form-inline">
            <button type="submit" class="btn btn-primary mr-1">Start</button>
            <div class="form-check form-check-inline">
                <input class="form-check-input" type="checkbox" id="OwnersToCsv-loop" name="loop" value="true" />
                <label class="form-check-label" for="OwnersToCsv-loop">Loop</label>
            </div>
        </form>
    </div>
</div>