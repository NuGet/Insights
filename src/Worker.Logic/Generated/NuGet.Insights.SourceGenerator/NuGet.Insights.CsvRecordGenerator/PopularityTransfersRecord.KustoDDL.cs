// <auto-generated />

// Copyright (c) .NET Foundation. All rights reserved.
// Licensed under the Apache License, Version 2.0. See License.txt in the project root for license information.

using System.Collections.Generic;

namespace NuGet.Insights
{
    static partial class KustoDDL
    {
        public const string PopularityTransfersRecordDefaultTableName = "PopularityTransfers";

        public static readonly IReadOnlyList<string> PopularityTransfersRecordDDL = new[]
        {
            ".drop table __TABLENAME__ ifexists",

            @".create table __TABLENAME__ (
    LowerId: string,
    Id: string,
    TransferIds: dynamic,
    TransferLowerIds: dynamic
) with (docstring = __DOCSTRING__, folder = __FOLDER__)",

            ".alter-merge table __TABLENAME__ policy retention softdelete = 30d",

            @".create table __TABLENAME__ ingestion csv mapping 'BlobStorageMapping'
'['
    '{""Column"":""LowerId"",""DataType"":""string"",""Properties"":{""Ordinal"":1}},'
    '{""Column"":""Id"",""DataType"":""string"",""Properties"":{""Ordinal"":2}},'
    '{""Column"":""TransferIds"",""DataType"":""dynamic"",""Properties"":{""Ordinal"":3}},'
    '{""Column"":""TransferLowerIds"",""DataType"":""dynamic"",""Properties"":{""Ordinal"":4}}'
']'",
        };

        public const string PopularityTransfersRecordPartitioningPolicy = @".alter table __TABLENAME__ policy partitioning '{'
  '""PartitionKeys"": ['
    '{'
      '""ColumnName"": ""LowerId"",'
      '""Kind"": ""Hash"",'
      '""Properties"": {'
        '""Function"": ""XxHash64"",'
        '""MaxPartitionCount"": 256'
      '}'
    '}'
  ']'
'}'";

        private static readonly bool PopularityTransfersRecordAddTypeToDefaultTableName = AddTypeToDefaultTableName(typeof(NuGet.Insights.Worker.PopularityTransfersToCsv.PopularityTransfersRecord), PopularityTransfersRecordDefaultTableName);

        private static readonly bool PopularityTransfersRecordAddTypeToDDL = AddTypeToDDL(typeof(NuGet.Insights.Worker.PopularityTransfersToCsv.PopularityTransfersRecord), PopularityTransfersRecordDDL);

        private static readonly bool PopularityTransfersRecordAddTypeToPartitioningPolicy = AddTypeToPartitioningPolicy(typeof(NuGet.Insights.Worker.PopularityTransfersToCsv.PopularityTransfersRecord), PopularityTransfersRecordPartitioningPolicy);
    }
}
